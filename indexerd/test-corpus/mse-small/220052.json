{"text": "Partition of a set of size n into subsets of size 1 and 2.\n\nBefore I ask the question, I must admit that combinatorics has never been my forte.\nI am given a set X of size [imath]n[/imath], we may assume assume [imath]X=\\{1,2,...,n\\}[/imath]. I want to count the partition of this set into subsets of size either 1 or 2. Let's denote the set of such partitions by [imath]T_{n}[/imath]. I can find a recurrence equation for [imath]|T_{n}|[/imath]. If I take one such partition, then the element [imath]n[/imath] must be in a subset of either size 2 or 1: let [imath]R_{2}[/imath] be the set of partitions in [imath]T_{n}[/imath] where [imath]n[/imath] is in a subset of size 2, and let [imath]R_{1}[/imath] be the set of partitions in [imath]T_{n}[/imath] where [imath]n[/imath] is in a subset of size 1. Then [imath]R_{1}\\cup R_{2}=T_{n}[/imath] and their intersection is empty, so [imath]|R_{1}|+ |R_{2}|=|T_{n}|[/imath]. In fact [imath]R_{1}[/imath] is simply [imath]T_{n-1}[/imath] and [imath]R_{2}[/imath] is [imath](n-1)T_{n-2}[/imath] (as I have [imath]n-1[/imath] choices for the element in the same subset in which [imath]n[/imath] lies and then I can partition the remaining [imath]n-2[/imath] elements in [imath]|T_{n-2}|[/imath] ways). So [imath]|T_{n}|=(n-1)|T_{n-1}|+|T_{n-2}|[/imath]. \nThis recurrence relation seems to work (in a very heuristic way, I have checked it for few [imath]n[/imath]'s), but I am not sure it is right. I can construct a bijection between [imath]T_{n}[/imath] and the set [imath]U_{n}[/imath] of elements of the symmetric group [imath]S_{n}[/imath]  with cycles types which are a sequence of 2's and 1's. \nFor example, I tried to calculate [imath]|U_{6}|[/imath] as follows: I have a single choice for the permutation of cycle type [imath](1,1,1,1,1,1)[/imath], [imath]\\frac{6!}{2*5!}[/imath] for the permutation with cycle type [imath](2,1,1,1,1)[/imath], [imath]\\frac{6!}{4*4!}[/imath] for the permutation with cycle type [imath](2,2,1,1)[/imath], and [imath]\\frac{6!}{8*3!}[/imath] for the permutation with cycle type [imath](2,2,2)[/imath] but this gives me [imath]26.5[/imath].\nThe questions are: \nThank you so much in advance and I hope the questions are clear.\nErratum: I mis-wrote the recurrence relation, it should read [imath]|T_{n}|=(n-1)|T_{n-2}|+|T_{n-1}|[/imath].\n\nsequence Sloane A000085\n\nYour work looked good at first, but then I think you mis-wrote your formula for [imath]T_n[/imath]. In particular, you multiplied the wrong piece by [imath](n-1)[/imath] at the end of your first full paragraph.\nThere is nothing \"heuristic\" about this recurrence relation; you proved it holds!\nBasically restating back what you wrote: whatever the answer is for a set of size [imath]n-1[/imath] (let's call this [imath]f_{n-1}[/imath]) consider next a set of size [imath]n[/imath]. Begin by putting the element [imath]n[/imath] into a subset. If you put it into a subset of size [imath]1[/imath], then there are [imath]n-1[/imath] elements left to partition into subsets of size [imath]1[/imath] or [imath]2[/imath], which we just decided can be done in [imath]f_{n-1}[/imath] ways. On the other hand, if we put [imath]n[/imath] into a subset of size [imath]2[/imath], which can be done in one of [imath]n-1[/imath] different ways (one possible pairing with each of the other [imath]n-1[/imath] elements), then there will be [imath]f_{n-2}[/imath] ways to partition the remaining [imath]n-2[/imath] elements. \nThis gives: [imath]f_{n} = f_{n-1} + (n-1) f_{n-2}[/imath].\n\nThank you so much, so my proof was right! :)\n\nThe permutations whose cycle lengths are all [imath]1[/imath] or [imath]2[/imath] are precisely the involutions, and the number of involutions on [imath]\\{1,\\dots,n\\}[/imath] is [imath]\\sum_{k=0}^{\\lfloor n/2\\rfloor}\\binom{n}{2k}(2k-1)!!\\;,\\tag{1}[/imath]\nwhere we set [imath](-1)!!=1[/imath]. For [imath]n=6[/imath] this yields the value\n[imath]\\sum_{k=0}^3\\binom6{2k}(2k-1)!!=1\\cdot1+15\\cdot1+15\\cdot3\\cdot1+1\\cdot5\\cdot3\\cdot1=76\\;.[/imath]\nThe number of permutations of [imath]\\{1,\\dots,n\\}[/imath] having [imath]r[/imath] [imath]2[/imath]-cycles and [imath]n-2r[/imath] fixed points is [imath]\\frac{n!}{1^{n-2r}\\cdot2^r\\cdot(n-2r)!\\cdot r!}=\\frac{n!}{2^rr!(n-2r)!}\\;,[/imath] so [imath]U_6[/imath] has [imath]1[/imath] permutation of type [imath](1,1,1,1,1,1)[/imath], [imath]\\frac{6!}{2\\cdot4!}=15[/imath] of type [imath](1,1,1,1,2)[/imath], [imath]\\frac{6!}{4\\cdot2!\\cdot 2!}=45[/imath] of type [imath](1,1,2,2)[/imath], and [imath]\\frac{6!}{8\\cdot3!\\cdot0!}=15[/imath] of type [imath](2,2,2)[/imath].\nNow to the derivation of your recurrence. There are a couple of glitches. First, your \u2018[imath]R_1[/imath] is simply [imath]T_{n-1}[/imath] and [imath]R_2[/imath] is [imath](n-1)T_{n-2}[/imath]\u2019 should be \u2018[imath]|R_1|[/imath] is simply [imath]|T_{n-1}|[/imath] and [imath]|R_2|[/imath] is [imath](n-1)|T_{n-2}|[/imath]\u2019. It isn\u2019t the sets that are equal, but rather their cardinalities. And secondly, you reversed the coefficients when you wrote [imath]|T_{n}|=(n-1)|T_{n-1}|+|T_{n-2}|[/imath]: that should have been [imath]|T_{n}|=|T_{n-1}|+(n-1)|T_{n-2}|[/imath]. The basic reasoning is correct, however.\nAdded: This special case can be handled more directly, but I got formula [imath](1)[/imath] from a more general result: if [imath]C[/imath] is any set of positive integers, and [imath]g_C(n)[/imath] is the number of permutations of [imath]\\{1,\\dots,n\\}[/imath] whose cycle lengths are all in [imath]C[/imath], then the exponential generating function of the [imath]g_C(n)[/imath] is\n[imath]G_C(x)=\\sum_{n\\ge 0}g_C(n)\\frac{x^n}{n!}=\\exp\\left(\\sum_{n\\in C}\\frac{x^n}n\\right)\\;.[/imath]\nTake [imath]C=\\{1,2\\}[/imath], and this becomes\n[imath]G_C(x)=\\exp\\left(x+\\frac{x^2}2\\right)=\\left(\\sum_{k\\ge 0}\\frac{x^k}{k!}\\right)\\left(\\sum_{i\\ge 0}\\frac{x^{2i}}{2^ii!}\\right)\\;.[/imath]\nThe coefficient of [imath]n[/imath] in the product on the right is [imath]\\sum_{i=0}^{\\lfloor n/2\\rfloor}\\frac1{(n-2i)!2^ii!}=\\sum_{i=0}^{\\lfloor n/2\\rfloor}\\left((n-2i)!\\cdot\\frac{(2i)!}{(2i-1)!!}\\right)^{-1}=\\sum_{i=0}^{\\lfloor n/2\\rfloor}\\frac1{n!}\\binom{n}{2i}(2i-1)!!\\;,[/imath] so [imath]g_C(n)=\\sum_{i=0}^{\\lfloor n/2\\rfloor}\\binom{n}{2i}(2i-1)!!\\;.[/imath]\n\nThank you a lot, now I have understood what was wrong with my counting of the permutations.\n\nMoreover, from\n[imath] f_n = f_{n+1} + (n-1) f_{n-2} [/imath]\nit is quite easy to deduce:\n[imath] f_n = \\frac{d^n}{dx^n}\\left.\\exp\\left(x+\\frac{x^2}{2}\\right)\\right|_{x=0}. [/imath]\nIn fact, if we take [imath]f_n = n!\\,g_n[/imath] and\n[imath] g(x) = \\sum_{n=1}^{+\\infty} g_n\\, x^n,[/imath]\nwe have\n[imath] n\\,g_n = g_{n-1} + g_{n-2} [/imath]\nand so:\n[imath] g'(x) = g(x) + x\\, g(x).[/imath]\n\n\n", "url": "http://math.stackexchange.com/questions/220052/partition-of-a-set-of-size-n-into-subsets-of-size-1-and-2"}